{"version":3,"file":"withSentryConfig.js","sources":["../../../src/config/withSentryConfig.ts"],"sourcesContent":["/* eslint-disable max-lines */\n/* eslint-disable complexity */\nimport { isThenable, parseSemver } from '@sentry/core';\nimport { getSentryRelease } from '@sentry/node';\nimport * as childProcess from 'child_process';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport type {\n  ExportedNextConfig as NextConfig,\n  NextConfigFunction,\n  NextConfigObject,\n  SentryBuildOptions,\n} from './types';\nimport { getNextjsVersion } from './util';\nimport { constructWebpackConfigFunction } from './webpack';\n\nlet showedExportModeTunnelWarning = false;\n\n/**\n * Modifies the passed in Next.js configuration with automatic build-time instrumentation and source map upload.\n *\n * @param nextConfig A Next.js configuration object, as usually exported in `next.config.js` or `next.config.mjs`.\n * @param sentryBuildOptions Additional options to configure instrumentation and\n * @returns The modified config to be exported\n */\nexport function withSentryConfig<C>(nextConfig?: C, sentryBuildOptions: SentryBuildOptions = {}): C {\n  const castNextConfig = (nextConfig as NextConfig) || {};\n  if (typeof castNextConfig === 'function') {\n    return function (this: unknown, ...webpackConfigFunctionArgs: unknown[]): ReturnType<NextConfigFunction> {\n      const maybePromiseNextConfig: ReturnType<typeof castNextConfig> = castNextConfig.apply(\n        this,\n        webpackConfigFunctionArgs,\n      );\n\n      if (isThenable(maybePromiseNextConfig)) {\n        return maybePromiseNextConfig.then(promiseResultNextConfig => {\n          return getFinalConfigObject(promiseResultNextConfig, sentryBuildOptions);\n        });\n      }\n\n      return getFinalConfigObject(maybePromiseNextConfig, sentryBuildOptions);\n    } as C;\n  } else {\n    return getFinalConfigObject(castNextConfig, sentryBuildOptions) as C;\n  }\n}\n\n// Modify the materialized object form of the user's next config by deleting the `sentry` property and wrapping the\n// `webpack` property\nfunction getFinalConfigObject(\n  incomingUserNextConfigObject: NextConfigObject,\n  userSentryOptions: SentryBuildOptions,\n): NextConfigObject {\n  const releaseName = userSentryOptions.release?.name ?? getSentryRelease() ?? getGitRevision();\n\n  if (userSentryOptions?.tunnelRoute) {\n    if (incomingUserNextConfigObject.output === 'export') {\n      if (!showedExportModeTunnelWarning) {\n        showedExportModeTunnelWarning = true;\n        // eslint-disable-next-line no-console\n        console.warn(\n          '[@sentry/nextjs] The Sentry Next.js SDK `tunnelRoute` option will not work in combination with Next.js static exports. The `tunnelRoute` option uses serverside features that cannot be accessed in export mode. If you still want to tunnel Sentry events, set up your own tunnel: https://docs.sentry.io/platforms/javascript/troubleshooting/#using-the-tunnel-option',\n        );\n      }\n    } else {\n      setUpTunnelRewriteRules(incomingUserNextConfigObject, userSentryOptions.tunnelRoute);\n    }\n  }\n\n  setUpBuildTimeVariables(incomingUserNextConfigObject, userSentryOptions, releaseName);\n\n  const nextJsVersion = getNextjsVersion();\n\n  // Add the `clientTraceMetadata` experimental option based on Next.js version. The option got introduced in Next.js version 15.0.0 (actually 14.3.0-canary.64).\n  // Adding the option on lower versions will cause Next.js to print nasty warnings we wouldn't confront our users with.\n  if (nextJsVersion) {\n    const { major, minor } = parseSemver(nextJsVersion);\n    if (major !== undefined && minor !== undefined && (major >= 15 || (major === 14 && minor >= 3))) {\n      incomingUserNextConfigObject.experimental = incomingUserNextConfigObject.experimental || {};\n      incomingUserNextConfigObject.experimental.clientTraceMetadata = [\n        'baggage',\n        'sentry-trace',\n        ...(incomingUserNextConfigObject.experimental?.clientTraceMetadata || []),\n      ];\n    }\n  } else {\n    // eslint-disable-next-line no-console\n    console.log(\n      \"[@sentry/nextjs] The Sentry SDK was not able to determine your Next.js version. If you are using Next.js version 15 or greater, please add `experimental.clientTraceMetadata: ['sentry-trace', 'baggage']` to your Next.js config to enable pageload tracing for App Router.\",\n    );\n  }\n\n  // From Next.js version (15.0.0-canary.124) onwards, Next.js does no longer require the `experimental.instrumentationHook` option and will\n  // print a warning when it is set, so we need to conditionally provide it for lower versions.\n  if (nextJsVersion) {\n    const { major, minor, patch, prerelease } = parseSemver(nextJsVersion);\n    const isFullySupportedRelease =\n      major !== undefined &&\n      minor !== undefined &&\n      patch !== undefined &&\n      major >= 15 &&\n      ((minor === 0 && patch === 0 && prerelease === undefined) || minor > 0 || patch > 0);\n    const isSupportedV15Rc =\n      major !== undefined &&\n      minor !== undefined &&\n      patch !== undefined &&\n      prerelease !== undefined &&\n      major === 15 &&\n      minor === 0 &&\n      patch === 0 &&\n      prerelease.startsWith('rc.') &&\n      parseInt(prerelease.split('.')[1] || '', 10) > 0;\n    const isSupportedCanary =\n      minor !== undefined &&\n      patch !== undefined &&\n      prerelease !== undefined &&\n      major === 15 &&\n      minor === 0 &&\n      patch === 0 &&\n      prerelease.startsWith('canary.') &&\n      parseInt(prerelease.split('.')[1] || '', 10) >= 124;\n\n    if (!isFullySupportedRelease && !isSupportedV15Rc && !isSupportedCanary) {\n      if (incomingUserNextConfigObject.experimental?.instrumentationHook === false) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          '[@sentry/nextjs] You turned off the `experimental.instrumentationHook` option. Note that Sentry will not be initialized if you did not set it up inside `instrumentation.(js|ts)`.',\n        );\n      }\n      incomingUserNextConfigObject.experimental = {\n        instrumentationHook: true,\n        ...incomingUserNextConfigObject.experimental,\n      };\n    }\n  } else {\n    // If we cannot detect a Next.js version for whatever reason, the sensible default is to set the `experimental.instrumentationHook`, even though it may create a warning.\n    if (\n      incomingUserNextConfigObject.experimental &&\n      'instrumentationHook' in incomingUserNextConfigObject.experimental\n    ) {\n      if (incomingUserNextConfigObject.experimental.instrumentationHook === false) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          '[@sentry/nextjs] You set `experimental.instrumentationHook` to `false`. If you are using Next.js version 15 or greater, you can remove that option. If you are using Next.js version 14 or lower, you need to set `experimental.instrumentationHook` in your `next.config.(js|mjs)` to `true` for the SDK to be properly initialized in combination with `instrumentation.(js|ts)`.',\n        );\n      }\n    } else {\n      // eslint-disable-next-line no-console\n      console.log(\n        \"[@sentry/nextjs] The Sentry SDK was not able to determine your Next.js version. If you are using Next.js version 15 or greater, Next.js will probably show you a warning about the `experimental.instrumentationHook` being set. To silence Next.js' warning, explicitly set the `experimental.instrumentationHook` option in your `next.config.(js|mjs|ts)` to `undefined`. If you are on Next.js version 14 or lower, you can silence this particular warning by explicitly setting the `experimental.instrumentationHook` option in your `next.config.(js|mjs)` to `true`.\",\n      );\n      incomingUserNextConfigObject.experimental = {\n        instrumentationHook: true,\n        ...incomingUserNextConfigObject.experimental,\n      };\n    }\n  }\n\n  // We wanna check whether the user added a `onRouterTransitionStart` handler to their client instrumentation file.\n  const instrumentationClientFileContents = getInstrumentationClientFileContents();\n  if (\n    instrumentationClientFileContents !== undefined &&\n    !instrumentationClientFileContents.includes('onRouterTransitionStart')\n  ) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      '[@sentry/nextjs] ACTION REQUIRED: To instrument navigations, the Sentry SDK requires you to export an `onRouterTransitionStart` hook from your `instrumentation-client.(js|ts)` file. You can do so by adding `export const onRouterTransitionStart = Sentry.captureRouterTransitionStart;` to the file.',\n    );\n  }\n\n  if (nextJsVersion) {\n    const { major, minor, patch, prerelease } = parseSemver(nextJsVersion);\n    const isSupportedVersion =\n      major !== undefined &&\n      minor !== undefined &&\n      patch !== undefined &&\n      (major > 15 ||\n        (major === 15 && minor > 3) ||\n        (major === 15 && minor === 3 && patch === 0 && prerelease === undefined) ||\n        (major === 15 && minor === 3 && patch > 0));\n    const isSupportedCanary =\n      major !== undefined &&\n      minor !== undefined &&\n      patch !== undefined &&\n      prerelease !== undefined &&\n      major === 15 &&\n      minor === 3 &&\n      patch === 0 &&\n      prerelease.startsWith('canary.') &&\n      parseInt(prerelease.split('.')[1] || '', 10) >= 28;\n    const supportsClientInstrumentation = isSupportedCanary || isSupportedVersion;\n\n    if (!supportsClientInstrumentation && process.env.TURBOPACK) {\n      if (process.env.NODE_ENV === 'development') {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[@sentry/nextjs] WARNING: You are using the Sentry SDK with Turbopack (\\`next dev --turbo\\`). The Sentry SDK is compatible with Turbopack on Next.js version 15.3.0 or later. You are currently on ${nextJsVersion}. Please upgrade to a newer Next.js version to use the Sentry SDK with Turbopack. Note that the SDK will continue to work for non-Turbopack production builds. This warning is only about dev-mode.`,\n        );\n      } else if (process.env.NODE_ENV === 'production') {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `[@sentry/nextjs] WARNING: You are using the Sentry SDK with Turbopack (\\`next build --turbo\\`). The Sentry SDK is compatible with Turbopack on Next.js version 15.3.0 or later. You are currently on ${nextJsVersion}. Please upgrade to a newer Next.js version to use the Sentry SDK with Turbopack. Note that as Turbopack is still experimental for production builds, some of the Sentry SDK features like source maps will not work. Follow this issue for progress on Sentry + Turbopack: https://github.com/getsentry/sentry-javascript/issues/8105.`,\n        );\n      }\n    }\n  }\n\n  return {\n    ...incomingUserNextConfigObject,\n    webpack: constructWebpackConfigFunction(incomingUserNextConfigObject, userSentryOptions, releaseName),\n  };\n}\n\n/**\n * Injects rewrite rules into the Next.js config provided by the user to tunnel\n * requests from the `tunnelPath` to Sentry.\n *\n * See https://nextjs.org/docs/api-reference/next.config.js/rewrites.\n */\nfunction setUpTunnelRewriteRules(userNextConfig: NextConfigObject, tunnelPath: string): void {\n  const originalRewrites = userNextConfig.rewrites;\n\n  // This function doesn't take any arguments at the time of writing but we future-proof\n  // here in case Next.js ever decides to pass some\n  userNextConfig.rewrites = async (...args: unknown[]) => {\n    const tunnelRouteRewrite = {\n      // Matched rewrite routes will look like the following: `[tunnelPath]?o=[orgid]&p=[projectid]`\n      // Nextjs will automatically convert `source` into a regex for us\n      source: `${tunnelPath}(/?)`,\n      has: [\n        {\n          type: 'query',\n          key: 'o', // short for orgId - we keep it short so matching is harder for ad-blockers\n          value: '(?<orgid>\\\\d*)',\n        },\n        {\n          type: 'query',\n          key: 'p', // short for projectId - we keep it short so matching is harder for ad-blockers\n          value: '(?<projectid>\\\\d*)',\n        },\n      ],\n      destination: 'https://o:orgid.ingest.sentry.io/api/:projectid/envelope/?hsts=0',\n    };\n\n    const tunnelRouteRewriteWithRegion = {\n      // Matched rewrite routes will look like the following: `[tunnelPath]?o=[orgid]&p=[projectid]?r=[region]`\n      // Nextjs will automatically convert `source` into a regex for us\n      source: `${tunnelPath}(/?)`,\n      has: [\n        {\n          type: 'query',\n          key: 'o', // short for orgId - we keep it short so matching is harder for ad-blockers\n          value: '(?<orgid>\\\\d*)',\n        },\n        {\n          type: 'query',\n          key: 'p', // short for projectId - we keep it short so matching is harder for ad-blockers\n          value: '(?<projectid>\\\\d*)',\n        },\n        {\n          type: 'query',\n          key: 'r', // short for region - we keep it short so matching is harder for ad-blockers\n          value: '(?<region>[a-z]{2})',\n        },\n      ],\n      destination: 'https://o:orgid.ingest.:region.sentry.io/api/:projectid/envelope/?hsts=0',\n    };\n\n    // Order of these is important, they get applied first to last.\n    const newRewrites = [tunnelRouteRewriteWithRegion, tunnelRouteRewrite];\n\n    if (typeof originalRewrites !== 'function') {\n      return newRewrites;\n    }\n\n    // @ts-expect-error Expected 0 arguments but got 1 - this is from the future-proofing mentioned above, so we don't care about it\n    const originalRewritesResult = await originalRewrites(...args);\n\n    if (Array.isArray(originalRewritesResult)) {\n      return [...newRewrites, ...originalRewritesResult];\n    } else {\n      return {\n        ...originalRewritesResult,\n        beforeFiles: [...newRewrites, ...(originalRewritesResult.beforeFiles || [])],\n      };\n    }\n  };\n}\n\nfunction setUpBuildTimeVariables(\n  userNextConfig: NextConfigObject,\n  userSentryOptions: SentryBuildOptions,\n  releaseName: string | undefined,\n): void {\n  const assetPrefix = userNextConfig.assetPrefix || userNextConfig.basePath || '';\n  const basePath = userNextConfig.basePath ?? '';\n  const rewritesTunnelPath =\n    userSentryOptions.tunnelRoute !== undefined && userNextConfig.output !== 'export'\n      ? `${basePath}${userSentryOptions.tunnelRoute}`\n      : undefined;\n\n  const buildTimeVariables: Record<string, string> = {\n    // Make sure that if we have a windows path, the backslashes are interpreted as such (rather than as escape\n    // characters)\n    _sentryRewriteFramesDistDir: userNextConfig.distDir?.replace(/\\\\/g, '\\\\\\\\') || '.next',\n    // Get the path part of `assetPrefix`, minus any trailing slash. (We use a placeholder for the origin if\n    // `assetPrefix` doesn't include one. Since we only care about the path, it doesn't matter what it is.)\n    _sentryRewriteFramesAssetPrefixPath: assetPrefix\n      ? new URL(assetPrefix, 'http://dogs.are.great').pathname.replace(/\\/$/, '')\n      : '',\n  };\n\n  if (userNextConfig.assetPrefix) {\n    buildTimeVariables._assetsPrefix = userNextConfig.assetPrefix;\n  }\n\n  if (userSentryOptions._experimental?.thirdPartyOriginStackFrames) {\n    buildTimeVariables._experimentalThirdPartyOriginStackFrames = 'true';\n  }\n\n  if (rewritesTunnelPath) {\n    buildTimeVariables._sentryRewritesTunnelPath = rewritesTunnelPath;\n  }\n\n  if (basePath) {\n    buildTimeVariables._sentryBasePath = basePath;\n  }\n\n  if (userNextConfig.assetPrefix) {\n    buildTimeVariables._sentryAssetPrefix = userNextConfig.assetPrefix;\n  }\n\n  if (userSentryOptions._experimental?.thirdPartyOriginStackFrames) {\n    buildTimeVariables._experimentalThirdPartyOriginStackFrames = 'true';\n  }\n\n  if (releaseName) {\n    buildTimeVariables._sentryRelease = releaseName;\n  }\n\n  if (typeof userNextConfig.env === 'object') {\n    userNextConfig.env = { ...buildTimeVariables, ...userNextConfig.env };\n  } else if (userNextConfig.env === undefined) {\n    userNextConfig.env = buildTimeVariables;\n  }\n}\n\nfunction getGitRevision(): string | undefined {\n  let gitRevision: string | undefined;\n  try {\n    gitRevision = childProcess\n      .execSync('git rev-parse HEAD', { stdio: ['ignore', 'pipe', 'ignore'] })\n      .toString()\n      .trim();\n  } catch (e) {\n    // noop\n  }\n  return gitRevision;\n}\n\nfunction getInstrumentationClientFileContents(): string | void {\n  const potentialInstrumentationClientFileLocations = [\n    ['src', 'instrumentation-client.ts'],\n    ['src', 'instrumentation-client.js'],\n    ['instrumentation-client.ts'],\n    ['instrumentation-client.ts'],\n  ];\n\n  for (const pathSegments of potentialInstrumentationClientFileLocations) {\n    try {\n      return fs.readFileSync(path.join(process.cwd(), ...pathSegments), 'utf-8');\n    } catch {\n      // noop\n    }\n  }\n}\n"],"names":[],"mappings":"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"}