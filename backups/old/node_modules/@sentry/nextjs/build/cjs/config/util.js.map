{"version":3,"file":"util.js","sources":["../../../src/config/util.ts"],"sourcesContent":["import * as fs from 'fs';\nimport { sync as resolveSync } from 'resolve';\n\n/**\n * Returns the version of Next.js installed in the project, or undefined if it cannot be determined.\n */\nexport function getNextjsVersion(): string | undefined {\n  const nextjsPackageJsonPath = resolveNextjsPackageJson();\n  if (nextjsPackageJsonPath) {\n    try {\n      const nextjsPackageJson: { version: string } = JSON.parse(\n        fs.readFileSync(nextjsPackageJsonPath, { encoding: 'utf-8' }),\n      );\n      return nextjsPackageJson.version;\n    } catch {\n      // noop\n    }\n  }\n\n  return undefined;\n}\n\nfunction resolveNextjsPackageJson(): string | undefined {\n  try {\n    return resolveSync('next/package.json', { basedir: process.cwd() });\n  } catch {\n    return undefined;\n  }\n}\n"],"names":["resolveSync"],"mappings":";;;;;AAGA;AACA;AACA;AACO,SAAS,gBAAgB,GAAuB;AACvD,EAAE,MAAM,qBAAA,GAAwB,wBAAwB,EAAE;AAC1D,EAAE,IAAI,qBAAqB,EAAE;AAC7B,IAAI,IAAI;AACR,MAAM,MAAM,iBAAiB,GAAwB,IAAI,CAAC,KAAK;AAC/D,QAAQ,EAAE,CAAC,YAAY,CAAC,qBAAqB,EAAE,EAAE,QAAQ,EAAE,OAAQ,EAAC,CAAC;AACrE,OAAO;AACP,MAAM,OAAO,iBAAiB,CAAC,OAAO;AACtC,MAAM,MAAM;AACZ;AACA;AACA;;AAEA,EAAE,OAAO,SAAS;AAClB;;AAEA,SAAS,wBAAwB,GAAuB;AACxD,EAAE,IAAI;AACN,IAAI,OAAOA,YAAW,CAAC,mBAAmB,EAAE,EAAE,OAAO,EAAE,OAAO,CAAC,GAAG,EAAC,EAAG,CAAC;AACvE,IAAI,MAAM;AACV,IAAI,OAAO,SAAS;AACpB;AACA;;;;"}